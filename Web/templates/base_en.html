<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/navbar.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/logo/favicon.png') }}">
    <link rel="icon" type="image/x-con" href="{{ url_for('static', filename='images/logo/favicon.ico') }}">
    {% block head %}{% endblock head %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js" crossorigin="anonymous"></script>
    <title>{% block title %}Market Watcher{% endblock %}</title>
</head>

<script src="{{ url_for('static', filename='js/base.js') }}"></script>

<body class="{% block body_class %}flex-layout{% endblock %}">
    <header>
        <div class="navbar">
            <div class="logo">
                <img src="{{ url_for('static', filename='images/logo/favicon.ico') }}" alt="logo">
                <h1 class="site-name">Market Watcher</h1>
            </div>
            <ul class="links">
                <li><a href="{{ url_for('index_lang', lang='en')}}"><i class="fa-solid fa-house"></i> Home</li></a>
                <li><a href="{{ url_for('about', lang='en')}}"><i class="fa-solid fa-circle-info"></i> Info</li></a>
                <li><a href="{{ url_for('contact', lang='en')}}"><i class="fa-solid fa-address-book"></i> Contact</li></a>

                <ul class="navbar-nav ms-auto">
                    {% if current_user.is_authenticated %}
                        <li class="nav-item dropdown">
                            <div class="dropdown-wrapper">
                                <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button">
                                    <i class="fas fa-user"></i> {{ current_user.username }}
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end" id="userDropdown-menu" aria-labelledby="userDropdown">
                                    <li><a class="dropdown-item" href="{{ url_for('profile', lang=request.cookies.get('lang', 'en')) }}">My profile</a></li>
                                    <!-- NO ADMIN CONTROL -->
                                    <li><a class="dropdown-item" href="{{ url_for('logout', lang=request.cookies.get('lang', 'en')) }}">Log out</a></li>
                                </ul>
                            </div>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('login', lang=request.cookies.get('lang', 'en')) }}">
                                <i class="fas fa-sign-in-alt"></i> Log in
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('register', lang=request.cookies.get('lang', 'en')) }}">
                                <i class="fas fa-user-plus"></i> Register
                            </a>
                        </li>
                    {% endif %}
                </ul>

                <ul class="lang-menu">
                    <li>
                        <a href="{{ url_for('set_language', lang='en', next=request.path) }}" class="lang-btn">
                            <img src="https://flagcdn.com/w40/gb.png" alt="English" width="20"> EN
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('set_language', lang='mkd', next=request.path) }}" class="lang-btn">
                            <img src="https://flagcdn.com/w40/mk.png" alt="Macedonian" width="20"> MKD
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('set_language', lang='al', next=request.path) }}" class="lang-btn">
                            <img src="https://flagcdn.com/w40/al.png" alt="Albanian" width="20"> AL
                        </a>
                    </li>
                </ul>
            </ul>
            <div class="toggle_btn">
                <i class="fa-solid fa-bars"></i>
            </div>
            
            <div class="dropdown_menu">
                <a href="{{ url_for('index_lang', lang='en')}}"><li><i class="fa-solid fa-house"></i> Home</li></a>
                <a href="{{ url_for('about', lang='en')}}"><li><i class="fa-solid fa-circle-info"></i> Info</li></a>
                <a href="{{ url_for('contact', lang='en')}}"><li><i class="fa-solid fa-address-book"></i> Contact</li></a>

                <ul class="navbar-nav ms-auto">
                    {% if current_user.is_authenticated %}
                        <li class="nav-item dropdown">
                            <div class="dropdown-wrapper">
                                <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button">
                                    <i class="fas fa-user"></i> {{ current_user.username }}
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end" id="userDropdown-menu" aria-labelledby="userDropdown">
                                    <li><a class="dropdown-item" href="{{ url_for('profile', lang=request.cookies.get('lang', 'en')) }}">My profile</a></li>
                                    <!-- NO ADMIN CONTROL -->
                                    <li><a class="dropdown-item" href="{{ url_for('logout', lang=request.cookies.get('lang', 'en')) }}">Log out</a></li>
                                </ul>
                            </div>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('login', lang=request.cookies.get('lang', 'en')) }}">
                                <i class="fas fa-sign-in-alt"></i> Log in
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('register', lang=request.cookies.get('lang', 'en')) }}">
                                <i class="fas fa-user-plus"></i> Register
                            </a>
                        </li>
                    {% endif %}
                </ul>

                <ul class="lang-menu">
                    <a href="{{ url_for('set_language', lang='en', next=request.path) }}" class="lang-btn">
                        <li>
                            <img src="https://flagcdn.com/w40/gb.png" alt="English" width="20"> EN
                        </li>
                    </a>
                    <a href="{{ url_for('set_language', lang='mkd', next=request.path) }}" class="lang-btn">
                        <li>
                            <img src="https://flagcdn.com/w40/mk.png" alt="Macedonian" width="20"> MKD
                        </li>
                    </a>
                    <a href="{{ url_for('set_language', lang='al', next=request.path) }}" class="lang-btn">
                        <li>
                            <img src="https://flagcdn.com/w40/al.png" alt="Albanian" width="20"> AL
                        </li>
                    </a>
                </ul>
            </div>
        </div>  
    </header>

    <main style="flex: 1">
        {% block content %}{% endblock %}
    </main>

    <footer>
        <p>&copy; 2025 Milosh Smiljkovikj</p>
    </footer>

</body>
</html>
